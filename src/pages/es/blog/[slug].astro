---
import Layout from '../../../layouts/Layout.astro';
import Navbar from '../../../components/Navbar.astro';
import Footer from '../../../components/Footer.astro';
import ContactModal from '../../../components/ContactModal.astro';
import { getAllPostsEs, getPostBySlugEs } from '../../../data/blogPosts-es';

export async function getStaticPaths() {
	const posts = getAllPostsEs();
	return posts.map(post => ({
		params: { slug: post.slug },
		props: { post }
	}));
}

const { post } = Astro.props;
const lang = 'es';
---

<Layout
	title={`${post.title} â€“ Trailmerge`}
	description={post.excerpt}
	lang={lang}
>
	<Navbar lang={lang} />

	<main id="main-content">
		<article class="blog-post">
			<div class="blog-hero">
				<div class="content-container">
					<div class="blog-hero-content">
						<div class="blog-meta">
							<span class="blog-date">{post.date}</span>
							<span class="blog-divider"> | </span>
							<span class="blog-category">{post.category}</span>
						</div>
						<h1 class="blog-title">{post.title}</h1>
						<div class="author-info">
							<img src={post.author.image} alt={post.author.name} class="author-image" />
							<div class="author-details">
								<div class="author-name">{post.author.name}</div>
								<div class="author-bio">{post.author.bio}</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="blog-content">
				<div class="content-container">
					<div class="blog-image-wrapper">
						<img src={post.image} alt={post.imageAlt} class="featured-image" />
						{post.imageCredit && (
							<p class="image-credit">{post.imageCredit}</p>
						)}
					</div>

					<div class="blog-body" set:html={post.content} />

					<div class="blog-footer">
						<div class="author-card">
							<img src={post.author.image} alt={post.author.name} class="author-card-image" />
							<div class="author-card-content">
								<h3>Acerca del Autor</h3>
								<div class="author-card-name">{post.author.name}</div>
								<p class="author-card-bio">{post.author.bio}</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</article>
	</main>

	<Footer lang={lang} />
	<ContactModal lang={lang} />
</Layout>

<style>
	.blog-post {
		font-family: Roboto, sans-serif;
	}

	.blog-hero {
		background-color: var(--off-white);
		padding-top: 140px;
		padding-bottom: 60px;
	}

	.blog-hero-content {
		max-width: 800px;
		margin: 0 auto;
	}

	.blog-meta {
		font-size: 12px;
		font-weight: 600;
		letter-spacing: 0.5px;
		color: var(--grey-3);
		margin-bottom: 20px;
	}

	.blog-divider {
		margin: 0 8px;
	}

	.blog-title {
		font-size: 48px;
		font-weight: 700;
		line-height: 1.2;
		color: var(--grey-5);
		margin-bottom: 32px;
		font-family: Bitter, serif;
	}

	.author-info {
		display: flex;
		align-items: center;
		gap: 16px;
	}

	.author-image {
		width: 80px;
		height: 80px;
		border-radius: 50%;
		object-fit: cover;
	}

	.author-name {
		font-weight: 700;
		font-size: 16px;
		color: var(--grey-5);
		margin-bottom: 4px;
		font-family: Bitter, serif;
	}

	.author-bio {
		font-size: 14px;
		color: var(--grey-3);
		line-height: 1.5;
	}

	.blog-content {
		background-color: var(--white);
		padding-top: 60px;
		padding-bottom: 80px;
	}

	.blog-image-wrapper {
		max-width: 800px;
		margin: 0 auto 40px;
	}

	.featured-image {
		width: 100%;
		height: auto;
		border-radius: 8px;
		margin-bottom: 8px;
	}

	.image-credit {
		font-size: 12px;
		color: var(--grey-3);
		text-align: center;
		margin: 0;
	}

	.blog-body {
		max-width: 700px;
		margin: 0 auto;
		font-size: 18px;
		line-height: 1.8;
		color: var(--grey-4);
	}

	.blog-body :global(h2) {
		font-size: 32px;
		font-weight: 700;
		color: var(--grey-5);
		margin-top: 40px !important;
		margin-bottom: 16px !important;
		font-family: Bitter, serif;
	}

	.blog-body :global(h3) {
		font-size: 24px;
		font-weight: 700;
		color: var(--grey-5);
		margin-top: 36px;
		margin-bottom: 16px;
		font-family: Bitter, serif;
	}

	.blog-body :global(p) {
		margin-bottom: 40px !important;
	}

	.blog-body :global(a) {
		color: var(--pimento);
		text-decoration: underline;
		transition: opacity 0.2s ease;
	}

	.blog-body :global(a:hover) {
		opacity: 0.7;
	}

	.blog-body :global(ul),
	.blog-body :global(ol) {
		margin-bottom: 24px;
		padding-left: 32px;
	}

	.blog-body :global(li) {
		margin-bottom: 12px;
	}

	.blog-body :global(strong) {
		font-weight: 700;
		color: var(--grey-5);
	}

	.blog-footer {
		max-width: 700px;
		margin: 60px auto 0;
		padding-top: 40px;
		border-top: 1px solid var(--grey-1);
	}

	.author-card {
		display: flex;
		gap: 24px;
		padding: 32px;
		background-color: var(--off-white);
		border-radius: 8px;
	}

	.author-card-image {
		width: 120px;
		height: 120px;
		border-radius: 50%;
		object-fit: cover;
		flex-shrink: 0;
	}

	.author-card-content h3 {
		font-size: 14px;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.5px;
		color: var(--grey-3);
		margin-bottom: 8px;
	}

	.author-card-name {
		font-size: 20px;
		font-weight: 700;
		color: var(--grey-5);
		margin-bottom: 8px;
		font-family: Bitter, serif;
	}

	.author-card-bio {
		font-size: 16px;
		line-height: 1.6;
		color: var(--grey-4);
		margin: 0;
	}

	@media (max-width: 768px) {
		.blog-hero {
			padding-top: 100px;
			padding-bottom: 40px;
		}

		.blog-title {
			font-size: 32px;
			margin-bottom: 24px;
		}

		.blog-content {
			padding-top: 40px;
			padding-bottom: 60px;
		}

		.blog-body {
			font-size: 16px;
		}

		.blog-body :global(p) {
			margin-bottom: 32px !important;
		}

		.blog-body :global(h2) {
			font-size: 24px;
			margin-top: 32px !important;
			margin-bottom: 12px !important;
		}

		.blog-body :global(h3) {
			font-size: 20px;
			margin-top: 24px;
			margin-bottom: 12px;
		}

		.author-card {
			flex-direction: column;
			text-align: center;
			align-items: center;
		}
	}
</style>
