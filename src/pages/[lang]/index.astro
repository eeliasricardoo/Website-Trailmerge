---
export const prerender = false;

export async function getStaticPaths() {
	return [{ params: { lang: 'en' } }, { params: { lang: 'es' } }];
}

import Layout from '../../layouts/Layout.astro';
import { useTranslations } from '../../i18n/utils';

// Import new redesigned components
import Hero from '../../components/home/Hero.astro';
import AsideSection from '../../components/home/AsideSection.astro';
import CompaniesSection from '../../components/home/CompaniesSection.astro';
import OurApproach from '../../components/home/OurApproach.astro';
import RecentProjects from '../../components/home/RecentProjects.astro';

const { lang } = Astro.params || { lang: 'en' };

if (lang && typeof lang === 'string' && !['en', 'es'].includes(lang)) {
	return new Response(null, {
		status: 404,
		statusText: 'Not Found',
	});
}

const t = useTranslations(lang as 'en' | 'es');
---

<Layout title={t('homepage.seo.title')} description={t('homepage.seo.description')} lang={lang}>
	<Hero lang={lang} />
	<AsideSection lang={lang} title={t('asideNew.title')} text={t('aside.text')} />
	<CompaniesSection lang={lang} />
	<OurApproach lang={lang} />
	<RecentProjects lang={lang} />
</Layout>
